# 🔐 NestChat - 端到端加密通信系统

一个完全透明的端到端加密实时通信系统，支持文本、图片、语音三种消息类型的安全传输。

## 🌟 特色功能

### ✨ 用户透明加密
- **零感知操作**：用户正常发送消息，系统自动加密传输
- **无缝解密**：接收消息时自动解密显示，用户看到的始终是明文
- **UI保持不变**：完全保留原有聊天界面和用户体验

### 🔒 强大的安全特性
- **RSA-1024密钥协商**：安全的密钥交换机制
- **AES-256对称加密**：高效的消息内容加密
- **LSB图片隐写术**：将加密数据隐藏在随机图片中
- **会话密钥管理**：每对用户独立的加密会话

### 📱 多媒体支持
- **📝 文本消息**：支持中文、Emoji、特殊字符的加密传输
- **🖼️ 图片消息**：用户上传图片，系统加密后隐写传输
- **🎙️ 语音消息**：录制语音，加密隐写传输，接收端自动解密播放

### � 聊天列表功能  
- **实时更新**：登录后自动从数据库读取最近聊天，按时间排序
- **高亮显示**：当前选中对话以浅玫瑰色高亮
- **时间格式**：统一显示"年月日时间"格式
- **头像一致**：联系人头像与好友页面保持一致
- **自动滚动**：切换对话时自动滚动到最新消息
- **新建对话**：从好友页面"发消息"按钮可创建新对话

## �🚀 快速开始

### 一键启动
```bash
# Windows用户
start_system.bat

# 或手动启动
cd backend && node server.js  # 终端1
cd frontend && npm run dev    # 终端2
```

### 访问地址
- **聊天应用**：http://localhost:5173
- **后端API**：http://localhost:3001  
- **加密测试**：test_e2e_encryption.html

### 测试账号
```
alice@test.com / 123456
bob@test.com / 123456
```

## 🎯 成功标准验证

### ✅ 已实现功能
- [x] 端到端加密通信（RSA + AES + LSB隐写）✅
- [x] 聊天列表实时更新，按时间排序 ✅
- [x] 当前选中对话高亮显示（浅玫瑰色）✅
- [x] 统一时间戳格式（年月日时间）✅
- [x] 头像系统一致性 ✅
- [x] 从好友页面创建新对话 ✅
- [x] 消息历史自动加载，滚动到最新 ✅
- [x] 实时消息推送和接收 ✅
- [x] 已读功能已移除（后端未实现）✅  
- [x] 用户录制语音时，系统自动加密隐写传输 ✅
- [x] 接收方实时自动解密显示明文内容 ✅
- [x] 整个过程用户完全无感知 ✅
- [x] 保持现有UI/UX不变 ✅
- [x] 最小化代码修改 ✅
- [x] 保留图片隐写术机制 ✅

## 📚 完整文档

详细技术文档请查看：`E2E_ENCRYPTION_GUIDE.md`

---

**🎉 端到端加密通信系统实现完成！**